<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ishrealmanime - Modern Anime Streaming Platform</title>
    <!-- Trigger deployment -->
    <meta name="description" content="A sleek, dark-themed anime streaming platform powered by Ishrealm, featuring hot pink neon accents and smooth animations.">
    <link rel="stylesheet" href="./styles.css">
    <link rel="icon" type="image/png" href="/assets/ishanime-logo.png">
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="header-container">
            <!-- Logo and Site Name -->
            <div class="logo-section" onclick="goHome()">
                <img src="/assets/ishanime-logo.png" alt="Ishrealm" class="logo" onerror="this.src='/assets/logo.png'">
                <h1 class="site-name">Ishrealmanime</h1>
            </div>

            <!-- Navigation -->
            <nav class="nav">
                <button class="nav-link active" onclick="filterShows('all')">All</button>
                <button class="nav-link" onclick="filterShows('popular')">Popular</button>
                <button class="nav-link" onclick="filterShows('new')">New</button>
                <button class="nav-link" onclick="filterShows('spring')">Spring 2025</button>
                <button class="nav-link" onclick="filterShows('random')">Random</button>
            </nav>

            <!-- Search and Actions -->
            <div class="actions">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search anime..." class="search-input">
                    <button class="search-btn" onclick="performSearch()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                </div>
                
                <button class="action-btn" onclick="showNotifications()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-dot"></span>
                </button>
                
                <button class="action-btn" onclick="showBookmarks()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                    </svg>
                </button>
                
                <button class="action-btn" onclick="toggleIframeFallback()" title="Toggle iframe fallback">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                    </svg>
                </button>
                
                <button class="action-btn" onclick="refreshThumbnails(); testAllThumbnails();" title="Refresh thumbnails">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                        <path d="M21 3v5h-5"></path>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                        <path d="M3 21v-5h5"></path>
                    </svg>
                </button>
                
                <button class="action-btn" onclick="testCurrentVideo()" title="Debug current video">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4"></path>
                        <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path>
                        <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path>
                        <path d="M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"></path>
                        <path d="M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>


    <!-- Main Content -->
    <main class="main">
        <!-- Shows Section -->
        <section class="shows-section">
            <div class="container">
                <div class="section-header">
                    <h3 class="section-title">Popular Anime</h3>
                    <div class="section-controls">
                        <button class="view-toggle active" onclick="toggleView('grid')">Grid</button>
                        <button class="view-toggle" onclick="toggleView('list')">List</button>
                    </div>
                </div>
                <div id="showsGrid" class="shows-grid">
                    <!-- Shows will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Backend Status -->
        <div id="backendStatus" class="backend-status">
            <div class="status-content">
                <div class="status-icon">ðŸ”„</div>
                <p>Checking backend connection...</p>
            </div>
        </div>
    </main>

    <!-- Player Section -->
    <div id="playerSection" class="player-section hidden">
        <div class="player-container">
            <div class="player-header">
                <div class="player-info">
                    <h3 id="playerTitle" class="player-title"></h3>
                    <p id="playerEpisode" class="player-episode"></p>
                </div>
                <div class="player-controls">
                    <button class="player-btn" onclick="previousEpisode()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="19,20 9,12 19,4 19,20"></polygon>
                            <line x1="5" y1="19" x2="5" y2="5"></line>
                        </svg>
                    </button>
                    <button class="player-btn" onclick="togglePlayPause()">
                        <svg id="playPauseIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="5,3 19,12 5,21 5,3"></polygon>
                        </svg>
                    </button>
                    <button class="player-btn" onclick="nextEpisode()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="5,4 15,12 5,20 5,4"></polygon>
                            <line x1="19" y1="5" x2="19" y2="19"></line>
                        </svg>
                    </button>
                    <button class="player-btn" onclick="closePlayer()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="video-container" id="videoContainer">
                <video id="videoPlayer" class="video-player" controls>
                    Your browser does not support the video tag.
                </video>
                <div class="video-quality-selector">
                    <select id="qualitySelector" onchange="changeVideoQuality()">
                        <option value="auto">Auto Quality</option>
                        <option value="1080p">1080p</option>
                        <option value="720p" selected>720p</option>
                        <option value="480p">480p</option>
                    </select>
                </div>
            </div>
            
            <div class="player-info-panel">
                <div class="episode-list">
                    <h4>Episodes</h4>
                    <div id="episodeList" class="episode-list-container">
                        <!-- Episodes will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner hidden">
        <div class="spinner"></div>
    </div>

    <!-- Sponsorship Popup -->
    <div id="sponsor-backdrop" class="sponsor-backdrop"></div>

    <div id="sponsor-popup" class="sponsor-popup">
        <div class="sponsor-header">
            <button id="sponsor-close" class="close-btn">âœ•</button>
            <div class="sponsor-header-content">
                <div class="sponsor-icon">ðŸŽ®</div>
                <div>
                    <h3>Make Money Playing Games!</h3>
                    <p>Earn real cash on your phone</p>
                </div>
            </div>
        </div>

        <div class="sponsor-body">
            <p><strong>Download GrabTap</strong> and start earning money by playing games on your phone!</p>
            <ul>
                <li>âœ… Play fun mobile games</li>
                <li>âœ… Earn real money</li>
                <li>âœ… Cash out via PayPal, gift cards & more</li>
                <li>âœ… Support Ishrealm while you earn!</li>
            </ul>

            <div class="sponsor-buttons">
                <button id="sponsor-link" class="btn-primary">Get GrabTap â†—</button>
                <button id="sponsor-later" class="btn-outline">Later</button>
            </div>

            <p class="sponsor-note">Sponsored â€¢ Helps keep Ishrealm free</p>
        </div>
    </div>

    <script src="./script.js"></script>
</body>
</html>